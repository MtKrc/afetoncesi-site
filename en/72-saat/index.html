<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link rel="icon" href="/assets/favicon.svg" type="image/svg+xml">
  <link rel="icon" href="/assets/favicon-32.png" sizes="32x32" type="image/png">
  <link rel="icon" href="/assets/favicon-16.png" sizes="16x16" type="image/png">
  <link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <meta name="description" content="72-Hour Preparedness Plan: personalized checklist by household size and needs. Printable one-page plan."/>
  <title>72-Hour Preparedness Plan | afetoncesi.com</title>
  <link rel="canonical" href="https://afetoncesi.com/en/72-saat/"/>
  <link rel="alternate" hreflang="x-default" href="https://afetoncesi.com/72-saat/"/>
  <link rel="alternate" hreflang="tr" href="https://afetoncesi.com/72-saat/"/>
  <link rel="alternate" hreflang="en" href="https://afetoncesi.com/en/72-saat/"/>
  <meta property="og:type" content="article"/>
  <meta property="og:url" content="https://afetoncesi.com/en/72-saat/"/>
  <meta property="og:title" content="72-Hour Preparedness Plan | afetoncesi.com"/>
  <meta property="og:description" content="Personalized 72-hour preparedness plan. Printable checklist."/>
  <meta property="og:image" content="https://afetoncesi.com/og-image.jpg"/>
  <meta property="og:locale" content="en_US"/>
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:title" content="72-Hour Preparedness Plan | afetoncesi.com"/>
  <meta name="twitter:description" content="Personalized 72-hour preparedness plan. Printable checklist."/>
  <meta name="twitter:image" content="https://afetoncesi.com/og-image.jpg"/>
  <link rel="stylesheet" href="/assets/styles.css"/>
  <link rel="stylesheet" href="/assets/print.css" media="print"/>
  <script type="application/ld+json">
{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://afetoncesi.com/en/"},{"@type":"ListItem","position":2,"name":"72-Hour Plan","item":"https://afetoncesi.com/en/72-saat/"}]}
  </script>
  <script type="application/ld+json">
{"@context":"https://schema.org","@type":"HowTo","name":"Create a 72-Hour Preparedness Plan","description":"Steps to create a personalized 72-hour disaster preparedness plan based on household size and needs.","step":[{"@type":"HowToStep","name":"Select household size"},{"@type":"HowToStep","name":"Enter children and special needs info"},{"@type":"HowToStep","name":"Enter home type and vehicle availability"},{"@type":"HowToStep","name":"Select current kit level"},{"@type":"HowToStep","name":"Generate and print your plan"}]}
  </script>
</head>
<body>
<a class="skiplink" href="#icerik">Skip to content</a>
<div class="alert-banner" role="alert">
  In an emergency, call <strong>112</strong>. This site provides preparedness information; it does not replace emergency response.
</div>
<header>
  <div class="wrap">
    <div class="topbar">
      <a class="brand" href="/en/">
        <img class="logo" src="/assets/favicon.svg" alt="" aria-hidden="true">
        <div>
          <strong>afetoncesi.com</strong>
          <span>Preparedness Guide (Türkiye)</span>
        </div>
      </a>
      <button id="menuToggle" class="menu-toggle" type="button" aria-expanded="false" aria-label="Open/close menu">
        <span aria-hidden="true">≡</span>
      </button>
      <nav aria-label="Main menu">
        <a href="/en/">Home</a>
        <a href="/en/genel-hazirlik/">General Preparedness</a>
        <a href="/en/72-saat/" class="active">72 Hours</a>
        <a href="/en/afet-turleri/">Disaster Types</a>
        <a href="/en/kaynaklar/">Sources</a>
        <a href="/en/sss/">FAQ</a>
      </nav>
      <button id="langToggle" class="langbtn lang-toggle" type="button" aria-label="Türkçe"><img class="lang-flag-icon" src="/assets/flag-tr.svg" alt="" aria-hidden="true"><span class="lang-badge" aria-hidden="true">TR</span><span class="sr-only">Türkçe</span></button>
    </div>
  </div>
</header>
<main id="icerik">
  <div class="wrap">

    <div class="card">
      <h1>72-Hour Preparedness Plan</h1>
      <p>Answer a few questions to get a personalized checklist. You can save the plan on your device or print it as a one-page summary.</p>

      <div id="wizard-form" class="wizard-form">
        <p class="wizard-progress" id="wizardProgress" aria-live="polite">Step 1 / 8</p>

        <form id="form72h" aria-label="72-hour plan questions">
          <fieldset id="step-1" class="wizard-step">
            <legend><strong>Household size</strong></legend>
            <p class="small">How many people are included in this plan?</p>
            <div class="wizard-options-grid">
              <label class="wizard-option"><input type="radio" name="household" value="1" required/><span class="wizard-option-text">1</span></label>
              <label class="wizard-option"><input type="radio" name="household" value="2"/><span class="wizard-option-text">2</span></label>
              <label class="wizard-option"><input type="radio" name="household" value="3"/><span class="wizard-option-text">3</span></label>
              <label class="wizard-option"><input type="radio" name="household" value="4"/><span class="wizard-option-text">4</span></label>
              <label class="wizard-option"><input type="radio" name="household" value="5"/><span class="wizard-option-text">5+</span></label>
            </div>
          </fieldset>
          <fieldset id="step-2" class="wizard-step" hidden>
            <legend><strong>Children in household?</strong></legend>
            <div class="wizard-options-grid">
              <label class="wizard-option"><input type="radio" name="children" value="yes" required/><span class="wizard-option-text">Yes</span></label>
              <label class="wizard-option"><input type="radio" name="children" value="no"/><span class="wizard-option-text">No</span></label>
            </div>
          </fieldset>
          <fieldset id="step-3" class="wizard-step" hidden>
            <legend><strong>Elderly (65+) or special needs?</strong></legend>
            <div class="wizard-options-grid">
              <label class="wizard-option"><input type="radio" name="elderly" value="yes" required/><span class="wizard-option-text">Yes</span></label>
              <label class="wizard-option"><input type="radio" name="elderly" value="no"/><span class="wizard-option-text">No</span></label>
            </div>
          </fieldset>
          <fieldset id="step-4" class="wizard-step" hidden>
            <legend><strong>Pets?</strong></legend>
            <div class="wizard-options-grid">
              <label class="wizard-option"><input type="radio" name="pets" value="yes" required/><span class="wizard-option-text">Yes</span></label>
              <label class="wizard-option"><input type="radio" name="pets" value="no"/><span class="wizard-option-text">No</span></label>
            </div>
          </fieldset>
          <fieldset id="step-5" class="wizard-step" hidden>
            <legend><strong>Home type</strong></legend>
            <div class="wizard-options-grid">
              <label class="wizard-option"><input type="radio" name="hometype" value="apartment" required/><span class="wizard-option-text">Apartment</span></label>
              <label class="wizard-option"><input type="radio" name="hometype" value="house"/><span class="wizard-option-text">House</span></label>
              <label class="wizard-option"><input type="radio" name="hometype" value="dorm"/><span class="wizard-option-text">Dorm / student housing</span></label>
              <label class="wizard-option"><input type="radio" name="hometype" value="other"/><span class="wizard-option-text">Other</span></label>
            </div>
          </fieldset>
          <fieldset id="step-6" class="wizard-step" hidden>
            <legend><strong>Car available?</strong></legend>
            <div class="wizard-options-grid">
              <label class="wizard-option"><input type="radio" name="car" value="yes" required/><span class="wizard-option-text">Yes</span></label>
              <label class="wizard-option"><input type="radio" name="car" value="no"/><span class="wizard-option-text">No</span></label>
            </div>
          </fieldset>
          <fieldset id="step-7" class="wizard-step" hidden>
            <legend><strong>Region (optional)</strong></legend>
            <p class="small">For content tips only; no risk scoring.</p>
            <select id="region" name="region" class="input" style="max-width:280px" aria-label="Region (optional)">
              <option value="">Skip</option>
              <option value="marmara">Marmara</option>
              <option value="ege">Aegean</option>
              <option value="icanadolu">Central Anatolia</option>
              <option value="akdeniz">Mediterranean</option>
              <option value="karadeniz">Black Sea</option>
              <option value="dogu">Eastern Anatolia</option>
              <option value="guneydogu">Southeastern Anatolia</option>
            </select>
          </fieldset>
          <fieldset id="step-8" class="wizard-step" hidden>
            <legend><strong>Current kit / preparedness level</strong></legend>
            <div class="wizard-options-grid">
              <label class="wizard-option"><input type="radio" name="kit" value="none" required/><span class="wizard-option-text">None</span></label>
              <label class="wizard-option"><input type="radio" name="kit" value="basic"/><span class="wizard-option-text">Basic / just starting</span></label>
              <label class="wizard-option"><input type="radio" name="kit" value="partial"/><span class="wizard-option-text">Partially ready</span></label>
              <label class="wizard-option"><input type="radio" name="kit" value="ready"/><span class="wizard-option-text">Ready</span></label>
            </div>
          </fieldset>
        </form>
        <p id="wizardRequiredMsg" class="wizard-required-msg" role="alert" aria-live="polite" hidden>This information is required to calculate your plan correctly.</p>
        <div class="wizard-actions actions no-print">
          <button type="button" class="btn" id="wizardBack" style="display:none">Back</button>
          <button type="button" class="btn primary" id="wizardNext">Next</button>
          <button type="button" class="btn primary" id="wizardSubmit" style="display:none">Generate plan</button>
        </div>
      </div>

      <div id="plan-output" class="plan-output" aria-live="polite" aria-atomic="true" hidden>
        <!-- Filled by script -->
      </div>

      <p class="small no-print" style="margin-top:16px" id="dataNote">Data is stored only on your device. Nothing is sent to any server.</p>
    </div>

  </div>
</main>
<footer class="footer">
  <div class="wrap">
    <div class="notice">
      <strong>Note:</strong> This site summarizes official guidance. In an emergency, call <strong>112</strong> (Türkiye) and follow official instructions.
    </div>
    <p class="small" style="margin-top:12px">Last updated: 2026-02-17 · <a href="/en/kaynaklar/">Official sources</a></p>
    <p class="small footer-links">About: <a href="/en/hakkimizda/">About us</a> · <a href="/en/iletisim/">Contact</a> · <a href="/en/gizlilik/">Privacy</a> · <a href="/en/kaynak-politikasi/">Source policy</a> · <a href="/en/editorial-ilkeler/">Editorial principles</a> · <a href="/en/nasil-finanse-ediliyoruz/">How we are funded</a></p>
    <script type="application/ld+json">
{"@context":"https://schema.org","@type":"Organization","name":"afetoncesi.com","url":"https://afetoncesi.com/","description":"Afet Öncesi Hazırlık Rehberi. Resmi kaynaklı kontrol listeleri."}
    </script>
  </div>
</footer>
<script src="/assets/app.js"></script>
<script>
(function () {
  var STORAGE_KEY = "afeto_72h_v1";
  var DONE_KEY = "afeto_72h_done_v1";
  var steps = [1,2,3,4,5,6,7,8];
  var currentStep = 1;
  var form = document.getElementById("form72h");
  var wizardForm = document.getElementById("wizard-form");
  var planOutput = document.getElementById("plan-output");
  var progressEl = document.getElementById("wizardProgress");
  var btnBack = document.getElementById("wizardBack");
  var btnNext = document.getElementById("wizardNext");
  var btnSubmit = document.getElementById("wizardSubmit");
  var requiredMsg = document.getElementById("wizardRequiredMsg");
  var REQUIRED_NAMES = ["household", "children", "elderly", "pets"];

  function isRequiredStep(stepNum) { return stepNum >= 1 && stepNum <= 4; }
  function hasRequiredSelection(stepNum) {
    var name = REQUIRED_NAMES[stepNum - 1];
    return name ? !!form.querySelector("[name=\"" + name + "\"]:checked") : true;
  }
  function updateNextButton() {
    var required = isRequiredStep(currentStep);
    var hasSelection = !required || hasRequiredSelection(currentStep);
    btnNext.disabled = required && !hasSelection;
    btnSubmit.disabled = required && !hasSelection;
    if (requiredMsg) requiredMsg.hidden = hasSelection;
  }

  var answerLabels = {
      household: { 1: "1", 2: "2", 3: "3", 4: "4", 5: "5+" },
      children: { yes: "Yes", no: "No" },
      elderly: { yes: "Yes", no: "No" },
      pets: { yes: "Yes", no: "No" },
      hometype: { apartment: "Apartment", house: "House", dorm: "Dorm / student housing", other: "Other" },
      car: { yes: "Yes", no: "No" },
      kit: { none: "None", basic: "Basic / just starting", partial: "Partially ready", ready: "Ready" }
    };

  function getAnswers() {
    var d = {};
    ["household","children","elderly","pets","hometype","car","region","kit"].forEach(function (name) {
      var el = form.querySelector("[name=" + name + "]:checked") || form.querySelector("[name=" + name + "]");
      d[name] = el ? el.value : "";
    });
    return d;
  }

  function showStep(n) {
    currentStep = n;
    steps.forEach(function (s) {
      var el = document.getElementById("step-" + s);
      if (el) el.hidden = (s !== n);
    });
    progressEl.textContent = "Step " + n + " / 8";
    btnBack.style.display = n === 1 ? "none" : "";
    btnNext.style.display = n === 8 ? "none" : "";
    btnSubmit.style.display = n === 8 ? "" : "none";
    updateNextButton();
  }

  function buildChecklist(answers) {
    var hh = parseInt(answers.household, 10) || 1;
    if (hh > 5) hh = 5;
    var hasChildren = answers.children === "yes";
    var hasElderly = answers.elderly === "yes";
    var hasPets = answers.pets === "yes";
    var waterL = hh * 9;
    var meals = hh * 9;

    var top10 = [
      { id: "top10-1", text: "Find your assembly point (e.g. via e-Devlet) and write it down." },
      { id: "top10-2", text: "Agree on a family meeting point and contact plan." },
      { id: "top10-3", text: "Calculate and store water (target: " + waterL + " L for 72 hours)." },
      { id: "top10-4", text: "Store long-shelf-life food (at least " + meals + " meals)." },
      { id: "top10-5", text: "Add first aid supplies and prescription meds to your kit." },
      { id: "top10-6", text: "Include flashlight, spare batteries, and power bank." },
      { id: "top10-7", text: "Keep copies of important documents in a waterproof bag." },
      { id: "top10-8", text: "Keep cash and small change." },
      { id: "top10-9", text: "Store the emergency kit near the exit, easy to grab." },
      { id: "top10-10", text: "Secure at least one heavy item at home (e.g. bookshelf, TV)." }
    ];

    var sections = [
      { key: "water", title: "Water & food", items: [
        { id: "water-1", text: "Water: target " + waterL + " L (3 L per person per day × 3 days)" },
        { id: "water-2", text: "Long-shelf-life food (canned, biscuits, nuts) — at least " + meals + " meals" },
        { id: "water-3", text: "Add baby food / special diet items if needed" }
      ]},
      { key: "firstaid", title: "First aid & hygiene", items: [
        { id: "firstaid-1", text: "First aid kit" },
        { id: "firstaid-2", text: "Prescription meds (at least 3 days)" },
        { id: "firstaid-3", text: "Hygiene items (wipes, soap, toothbrush)" },
        { id: "firstaid-4", text: "Masks" }
      ]},
      { key: "light", title: "Light, power & communication", items: [
        { id: "light-1", text: "Flashlight and spare batteries" },
        { id: "light-2", text: "Power bank / portable charger" },
        { id: "light-3", text: "Battery or crank radio" },
        { id: "light-4", text: "Whistle" }
      ]},
      { key: "docs", title: "Documents & money", items: [
        { id: "docs-1", text: "ID and important document copies (in waterproof bag)" },
        { id: "docs-2", text: "Cash and small change" },
        { id: "docs-3", text: "Photo of insurance / policy info" }
      ]},
      { key: "clothing", title: "Clothing & shelter", items: [
        { id: "clothing-1", text: "Raincoat, blanket or sleeping bag" },
        { id: "clothing-2", text: "Spare clothes and socks" },
        { id: "clothing-3", text: "Emergency blanket (foil type)" }
      ]},
      { key: "family", title: "Family plan & meeting point", items: [
        { id: "family-1", text: "Assembly point address written down (from e-Devlet)" },
        { id: "family-2", text: "Meeting point and contact person saved on everyone’s phone" },
        { id: "family-3", text: "112 and emergency contacts saved" }
      ]}
    ];

    if (hasChildren) {
      sections.push({ key: "children", title: "Children", addedBecause: "children", items: [
        { id: "children-1", text: "Baby/child food, nappies" },
        { id: "children-2", text: "Comfort item or toy" }
      ]});
    }
    if (hasElderly) {
      sections.push({ key: "medical", title: "Medical / special needs", addedBecause: "65+ or special needs", items: [
        { id: "medical-1", text: "Extra meds (at least 3 days)" },
        { id: "medical-2", text: "Glasses, hearing aid batteries" },
        { id: "medical-3", text: "Simple medical info card" }
      ]});
    }
    if (hasPets) {
      sections.push({ key: "pets", title: "Pets", addedBecause: "pets", items: [
        { id: "pets-1", text: "Pet food and water" },
        { id: "pets-2", text: "Leash, carrier" },
        { id: "pets-3", text: "Vet contact info" }
      ]});
    }

    return { top10: top10, sections: sections, answers: answers, waterL: waterL, meals: meals, answerLabels: answerLabels };
  }

  function getDoneState() {
    try {
      var raw = localStorage.getItem(DONE_KEY);
      return raw ? JSON.parse(raw) : {};
    } catch (e) { return {}; }
  }
  function setDoneState(obj) {
    try { localStorage.setItem(DONE_KEY, JSON.stringify(obj)); } catch (e) {}
  }
  function getAllItemIds(data) {
    var ids = [];
    data.top10.forEach(function (item) { if (item && item.id) ids.push(item.id); });
    data.sections.forEach(function (sec) {
      (sec.items || []).forEach(function (item) { if (item && item.id) ids.push(item.id); });
    });
    return ids;
  }
  function updateProgressUI(data) {
    var ids = getAllItemIds(data);
    var done = getDoneState();
    var completed = ids.filter(function (id) { return !!done[id]; }).length;
    var total = ids.length;
    var pct = total ? Math.round((completed / total) * 100) : 0;
    var textEl = planOutput.querySelector(".plan-progress-text");
    var barEl = planOutput.querySelector(".plan-progress-bar-fill");
    if (textEl) textEl.textContent = "Progress: " + completed + "/" + total + " (" + pct + "%)";
    if (barEl) barEl.style.width = pct + "%";
  }
  function bindCheckboxes(data) {
    var done = getDoneState();
    planOutput.querySelectorAll(".checklist input[type=checkbox][data-item-id]").forEach(function (cb) {
      var id = cb.getAttribute("data-item-id");
      cb.checked = !!done[id];
      cb.addEventListener("change", function () {
        var obj = getDoneState();
        obj[id] = cb.checked;
        setDoneState(obj);
        updateProgressUI(data);
      });
    });
    updateProgressUI(data);
  }

  function renderPlan(data) {
    function summaryLine(key, val) {
      var labels = data.answerLabels && data.answerLabels[key];
      return (labels && labels[val]) ? labels[val] : (val || "—");
    }
    var d = new Date();
    var dateStr = d.getMonth() + 1 + "/" + d.getDate() + "/" + d.getFullYear();
    var a = data.answers;
    var html = '<div class="plan-print-area">';
    html += '<p class="plan-explanation">This plan is computed from your answers; no personal data is sent to any server.</p>';
    html += '<h2>72-Hour Preparedness Plan</h2>';
    html += '<p class="small">Date: ' + dateStr + '</p>';
    html += '<h3>Your inputs</h3>';
    html += '<div class="plan-summary-box"><dl>';
    html += '<dt>Household:</dt><dd>' + summaryLine("household", a.household) + ' people</dd>';
    html += '<dt>Children:</dt><dd>' + summaryLine("children", a.children) + '</dd>';
    html += '<dt>65+ / special needs:</dt><dd>' + summaryLine("elderly", a.elderly) + '</dd>';
    html += '<dt>Pets:</dt><dd>' + summaryLine("pets", a.pets) + '</dd>';
    html += '<dt>Home type:</dt><dd>' + summaryLine("hometype", a.hometype) + '</dd>';
    html += '<dt>Car:</dt><dd>' + summaryLine("car", a.car) + '</dd>';
    html += '<dt>Kit status:</dt><dd>' + summaryLine("kit", a.kit) + '</dd>';
    html += '</dl></div>';
    html += '<h3>Computed quantities</h3>';
    html += '<div class="plan-targets">';
    html += '<div class="plan-target-card"><strong>' + (data.waterL || (parseInt(a.household, 10) || 1) * 9) + ' L</strong><span>Water target (72 h)</span></div>';
    html += '<div class="plan-target-card"><strong>' + (data.meals || (parseInt(a.household, 10) || 1) * 9) + ' meals</strong><span>Food target</span></div>';
    html += '</div>';
    html += '<div class="plan-progress"><span class="plan-progress-text">Progress: 0/0 (0%)</span><div class="plan-progress-bar-outer"><div class="plan-progress-bar-fill"></div></div><button type="button" class="btn no-print" id="btnResetDone">Reset completed</button></div>';
    html += '<h3>Top 10 actions today</h3><ul class="checklist">';
    data.top10.forEach(function (item) {
      var id = item && item.id;
      var text = (item && item.text) || (typeof item === 'string' ? item : '');
      if (!id) return;
      html += '<li><label><input type="checkbox" data-item-id="' + id + '"/> ' + text + '</label></li>';
    });
    html += '</ul>';
    data.sections.forEach(function (sec) {
      html += '<h3>' + sec.title + (sec.addedBecause ? ' <span class="plan-badge">Added because: ' + sec.addedBecause + '</span>' : '') + '</h3>';
      if (sec.addedBecause) html += '<p class="plan-badge">This section was added based on your answers.</p>';
      html += '<ul class="checklist">';
      sec.items.forEach(function (item) {
        var id = item && item.id;
        var text = (item && item.text) || (typeof item === 'string' ? item : '');
        if (!id) { html += '<li><label><input type="checkbox"/> ' + text + '</label></li>'; return; }
        html += '<li><label><input type="checkbox" data-item-id="' + id + '"/> ' + text + '</label></li>';
      });
      html += '</ul>';
    });
    html += '<h3>Related guides</h3><ul class="small">';
    html += '<li><a href="/en/acil-canta/">Emergency kit</a></li>';
    html += '<li><a href="/en/deprem-hazirlik/">Earthquake preparedness</a></li>';
    html += '<li><a href="/en/toplanma-alani-nasil-ogrenilir/">How to find your assembly point</a></li>';
    html += '<li><a href="/en/aile-plani/">Family plan</a></li>';
    html += '</ul>';
    html += '<div class="official-sources-72h" style="margin-top:20px"><h3>Official sources</h3><ul class="small">';
    html += '<li><a href="https://www.afad.gov.tr/afete-hazir-turkiye" target="_blank" rel="noopener">AFAD – Afete Hazır Türkiye</a></li>';
    html += '<li><a href="https://www.kizilay.org.tr/" target="_blank" rel="noopener">Türk Kızılay</a></li>';
    html += '<li><a href="https://www.112.gov.tr/" target="_blank" rel="noopener">112 Emergency (Türkiye)</a></li>';
    html += '<li><a href="https://www.mgm.gov.tr/meteouyari/turkiye.aspx" target="_blank" rel="noopener">MGM MeteoUyarı</a></li>';
    html += '</ul></div>';
    html += '<div class="plan-actions no-print actions" style="margin-top:16px">';
    html += '<button type="button" class="btn primary" id="btnSavePlan">Save plan</button> ';
    html += '<button type="button" class="btn" id="btnResetPlan">Reset</button> ';
    html += '<button type="button" class="btn primary" id="btnPrintPlan">Print to PDF</button>';
    html += '</div></div>';
    planOutput.innerHTML = html;
    planOutput.hidden = false;
    wizardForm.hidden = true;
    document.getElementById("dataNote").hidden = false;

    bindCheckboxes(data);
    var btnResetDone = document.getElementById("btnResetDone");
    if (btnResetDone) {
      btnResetDone.addEventListener("click", function () {
        try { localStorage.removeItem(DONE_KEY); } catch (e) {}
        planOutput.querySelectorAll(".checklist input[type=checkbox][data-item-id]").forEach(function (cb) { cb.checked = false; });
        updateProgressUI(data);
      });
    }

    document.getElementById("btnSavePlan").addEventListener("click", function () {
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify({ answers: getAnswers(), generatedAt: new Date().toISOString(), checklist: data }));
        planOutput.querySelector(".plan-actions").insertAdjacentHTML("afterend", "<p class=\"small\" style=\"margin-top:8px\">Plan saved.</p>");
      } catch (e) {}
    });
    document.getElementById("btnResetPlan").addEventListener("click", function () {
      try { localStorage.removeItem(STORAGE_KEY); } catch (e) {}
      planOutput.hidden = true;
      planOutput.innerHTML = "";
      wizardForm.hidden = false;
      showStep(1);
      form.reset();
    });
    document.getElementById("btnPrintPlan").addEventListener("click", function () { window.print(); });
  }

  form.addEventListener("change", function () { updateNextButton(); });

  btnNext.addEventListener("click", function () {
    if (isRequiredStep(currentStep) && !hasRequiredSelection(currentStep)) {
      if (requiredMsg) requiredMsg.hidden = false;
      return;
    }
    if (currentStep < 8) showStep(currentStep + 1);
  });
  btnBack.addEventListener("click", function () {
    if (currentStep > 1) showStep(currentStep - 1);
  });
  btnSubmit.addEventListener("click", function () {
    if (isRequiredStep(currentStep) && !hasRequiredSelection(currentStep)) {
      if (requiredMsg) requiredMsg.hidden = false;
      return;
    }
    var answers = getAnswers();
    var data = buildChecklist(answers);
    renderPlan(data);
  });

  try {
    var saved = localStorage.getItem(STORAGE_KEY);
    if (saved) {
      var parsed = JSON.parse(saved);
      if (parsed.checklist && parsed.checklist.top10 && parsed.checklist.sections) {
        renderPlan(parsed.checklist);
        return;
      }
    }
  } catch (e) {}
  showStep(1);
  updateNextButton();
})();
</script>
</body>
</html>
